{% extends 'templates/base.html' %}
{% load widget_tweaks %}
{% load humanize %}
{% block main %}

    <!-- BREADCRUMB AREA START -->
    <div class="ltn__breadcrumb-area ltn__breadcrumb-area-4 ltn__breadcrumb-color-white---">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="ltn__breadcrumb-inner text-center">
                        <h1 class="ltn__page-title">بررسی </h1>
                        <div class="ltn__breadcrumb-list">
                            <ul>
                                <li><a href="{% url 'main:Home_Page' %}" style="text-decoration: underline">خانه</a>
                                    <i class="fa-solid fa-chevron-left" style="font-size: 10px;margin-right: 5px;margin-left: 3px"></i>
                                </li>
                                <li>تسویه حساب</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- BREADCRUMB AREA END -->

    <!-- WISHLIST AREA START -->
    <div class="ltn__checkout-area mb-100">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="ltn__checkout-inner">
                        <div class="ltn__checkout-single-content mt-50">
                            <h4 class="title-2">جزئیات صورتحساب</h4>
                            <div class="ltn__checkout-single-content-info">
                                <form action="{% url 'cart:checkOut_page' %}" method="post">
                                    {% csrf_token %}
                                    <h6>اطلاعات شخصی</h6>
                                    <div class="row">
                                        <div class="col-md-6">
                                            {% for error in form.first_name.errors %}
                                                <h6 class="text-danger">{{ error }}</h6>
                                            {% endfor %}
                                            <div class="input-item input-item-name ltn__custom-icon">
                                                {{ form.first_name|attr:"required" }}
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            {% for error in form.last_name.errors %}
                                                <h6 class="text-danger">{{ error }}</h6>
                                            {% endfor %}
                                            <div class="input-item input-item-name ltn__custom-icon">
                                                {{ form.last_name|attr:"required" }}
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            {% for error in form.email.errors %}
                                                <h6 class="text-danger">{{ error }}</h6>
                                            {% endfor %}
                                            <div class="input-item input-item-email ltn__custom-icon">
                                                {{ form.email|attr:"required" }}
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            {% for error in form.phone.errors %}
                                                <h6 class="text-danger">{{ error }}</h6>
                                            {% endfor %}
                                            <div class="input-item input-item-phone ltn__custom-icon">
                                                {{ form.phone|attr:"required" }}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-4 col-md-6">
                                            {% if form.state.errors %}
                                                {% for error in form.state.errors %}
                                                    <h6 class="text-danger">{{ error }}</h6>
                                                {% endfor %}
                                            {% else %}
                                                <h6>استان</h6>
                                            {% endif %}
                                            <div class="input-item">
                                                {{ form.state|attr:'required' }}
                                            </div>
                                        </div>
                                        <div class="col-lg-4 col-md-6">
                                            {% if form.city.errors %}
                                                {% for error in form.city.errors %}
                                                    <h6 class="text-danger">{{ error }}</h6>
                                                {% endfor %}
                                            {% else %}
                                                <h6>شهر</h6>
                                            {% endif %}
                                            <div class="input-item">
                                                {{ form.city|attr:"required" }}
                                            </div>
                                        </div>
                                        <div class="col-lg-4 col-md-6">
                                            {% if form.postal_code.errors %}
                                                {% for error in form.postal_code.errors %}
                                                    <h6 class="text-danger">{{ error }}</h6>
                                                {% endfor %}
                                            {% else %}
                                                <h6>کد پستی</h6>
                                            {% endif %}
                                            <div class="input-item">
                                                {{ form.postal_code|attr:"required" }}
                                            </div>
                                        </div>
                                        <div class="col-lg-4 col-md-6">
                                            {% if form.national_code.errors %}
                                                {% for error in form.national_code.errors %}
                                                    <h6 class="text-danger">{{ error }}</h6>
                                                {% endfor %}
                                            {% else %}
                                                <h6>کد ملی</h6>
                                            {% endif %}
                                            <div class="input-item">
                                                {{ form.national_code|attr:"required" }}
                                            </div>
                                        </div>
                                        <div class="col-lg-12 col-md-12">
                                            {% if form.address.errors %}
                                                {% for error in form.address.errors %}
                                                    <h6 class="text-danger">{{ error }}</h6>
                                                {% endfor %}
                                            {% else %}
                                                <h6>آدرس</h6>
                                            {% endif %}
                                            <div class="input-item input-item-textarea ltn__custom-icon">
                                                {{ form.address|attr:"required" }}
                                            </div>
                                        </div>
                                    </div>
                                    <h6>یادداشت های سفارش (اختیاری)</h6>
                                    <div class="input-item input-item-textarea ltn__custom-icon">
                                        {{ form.note }}
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="ltn__checkout-payment-method mt-50">
                        <div class="ltn__payment-note mt-30 mb-30">
                            <p>* اطلاعات شخصی شما برای پردازش سفارش شما، پشتیبانی از تجربه شما در سراسر این وب سایت و برای
                                اهداف دیگری که در خط مشی رازداری ما توضیح داده شده است، استفاده می شود .
                            </p>
                            <p class="text-danger">* هزینه ارسال برعهده خریدار می باشد .</p>
                        </div>
                        <button class="btn theme-btn-1 btn-effect-1 text-uppercase" id="submitBtn" type="submit">پرداخت
                            و ثبت سفارش
                        </button>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="shoping-cart-total mt-50">
                        <h4 class="title-2">مجموع سبد خرید</h4>
                        <table class="table">
                            <tbody>
                            {% for item in cart %}
                                <tr>
                                    <td>
                                        <small>
                                            {{ item.quantity }}×
                                        </small>
                                        {{ item.product.product_name }}
                                    </td>
                                    <td>{{ item.total|intcomma:False }} تومان</td>
                                </tr>
                            {% endfor %}
                            <tr>
                                <td><strong>مجموع سفارش:</strong></td>
                                <td><strong>{{ cart.total|intcomma:False }} تومان</strong></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- WISHLIST AREA START -->
    <script>

        const form = document.querySelector('.ltn__checkout-single-content-info form');
        let submitBtn = document.getElementById('submitBtn');
        submitBtn.addEventListener('click', () => {
            form.submit();
        })
    </script>
{% endblock %}












